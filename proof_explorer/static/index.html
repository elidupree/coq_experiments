<!DOCTYPE html>

<html>
  <head>
    <meta charset="UTF-8">
    <title>EliDupree proof explorer</title>
<style>
</style>
  </head>
  <body>
    <div>
      <div id="content">
      
      </div>
    </div>
    <script src="/media/lodash.js"></script>
    <script src="/media/jquery-3.2.1.min.js"></script>
    <script src="/media/morphdom-umd.js"></script>
    <script>
      let update_period = 200;
      let last_update = Date.now();
      let last_ui_change_serial_number = undefined;
      function frame() {
        const now = Date.now();
        if (now < last_update + update_period) {
          requestAnimationFrame (frame);
        }
        else {
          last_update = now;
          $.post ({
            url: "/content",
            data: JSON.stringify ({last_ui_change_serial_number}),
          })
            .done ((response) => {
              console.log("foo");
              last_ui_change_serial_number = response.last_ui_change_serial_number;
              if (response.ui_replacement !== null) {
                morphdom ($("#content") [0], response.ui_replacement);
              }
            })
            .always (() => {
              requestAnimationFrame (frame);
            });
        }
      }

      frame();
    </script>
  </body>
</html>
